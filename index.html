<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>National Cyber Security Awareness Month October 2025 - STEM GAME </title>
<style>
  :root{--cyan:#00ffff}
  body{background:radial-gradient(circle at center,#0b0f14,#13232f);font-family:'Segoe UI',system-ui,-apple-system,sans-serif;color:#fff;margin:0;display:flex;flex-direction:column;align-items:center;min-height:100vh;padding-bottom:20px}

  /* POPUP FORM */
  #popup {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index:1000;
  }
  #popup-content {
    background:#111; padding:30px; border-radius:12px; width:90%; max-width:400px; text-align:center;
    box-shadow: 0 0 15px rgba(0,255,255,0.3);
  }
  #popup input { width:90%; margin:10px 0; padding:10px; border-radius:6px; border:none; }
  #popup button { width:95%; padding:10px; border:none; border-radius:6px; background:var(--cyan); color:#000; cursor:pointer; font-size:1rem; }
  #popup button:hover{filter:brightness(1.1);}

  /* GAME AREA HIDDEN INITIALLY */
  #gameArea{display:none; flex-direction:column; align-items:center; width:100%;}

  /* LOGOS */
  .top-logos{display:flex;justify-content:center;align-items:center;gap:20px;margin-top:10px; flex-wrap:wrap;}
  .top-logos .main-logo img{width:100px; display:block; margin:10px auto;}
  .top-logos .sub-logos img{height:46px; object-fit:contain; background:#fff; border-radius:8px; padding:4px; margin:5px;}

  h1{color:var(--cyan);text-shadow:0 0 12px var(--cyan);margin:8px 0}
  .muted{opacity:.8;font-size:.9rem}

  /* HUD / Game Styles */
  #hud{display:flex;gap:12px;flex-wrap:wrap;width:90%;max-width:820px;margin-top:10px}
  .hud-card{background:rgba(255,255,255,.06);padding:8px 12px;border-radius:8px;box-shadow:0 0 14px rgba(0,255,255,.12)}
  #healthBar{flex:1 1 100%;background:#222;border-radius:6px;height:14px}
  #healthFill{background:linear-gradient(90deg,#32cd32,#00ffcc);height:100%;width:100%;border-radius:6px;transition:width .35s ease}
  #inbox{margin-top:14px;width:90%;max-width:820px;background:rgba(255,255,255,0.07);padding:10px;border-radius:10px;box-shadow:0 0 20px rgba(0,255,255,0.16);overflow-y:auto;height:56vh}
  .mail{display:flex;align-items:flex-start;gap:12px;background:rgba(0,0,0,0.3);border-left:4px solid var(--cyan);padding:10px;margin:10px 0;border-radius:8px;opacity:0;animation:fadeIn .45s forwards}
  .mail-text{flex:1}
  @keyframes fadeIn{to{opacity:1}}
  .actions{margin-top:8px;display:flex;gap:8px}
  .btn{margin:0;border:none;border-radius:6px;padding:7px 12px;font-size:.92rem;cursor:pointer;transition:transform .12s,filter .15s}
  .btn:hover{transform:translateY(-1px);filter:brightness(1.08)}
  .report{background:#ff4040;color:#fff}
  .safe{background:#00bfff;color:#fff}
  #status{margin-top:8px;font-weight:600;min-height:22px}
  #restart,#start{margin-top:12px;padding:10px 18px;border:none;border-radius:8px;background:var(--cyan);color:#000;cursor:pointer}
  #restart{display:none}
</style>
</head>
<body>

<!-- POPUP FORM -->
<div id="popup">
  <div id="popup-content">
    <h2>Enter Your Details</h2>
    <form id="entryForm" action="https://formspree.io/f/xjkpbbkq" method="POST" target="hidden_iframe">
      <input type="text" name="name" id="name" placeholder="Your Name" required><br>
      <input type="email" name="email" id="email" placeholder="Your Email" required><br>
      <button type="submit">Start Mission</button>
    </form>
  </div>
</div>

<!-- Hidden iframe to submit form without reload -->
<iframe name="hidden_iframe" style="display:none;"></iframe>

<!-- GAME AREA -->
<div id="gameArea">
  <div class="top-logos">
  <div class="main-logo">
    <img src="https://static.wixstatic.com/media/49b629_728f6091c27c49d2bb477c5c118c2107~mv2.png" alt="Kalpakghar logo">
  </div>
  <div class="sub-logos">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Tata_Technologies_logo.svg/1200px-Tata_Technologies_logo.svg.png" alt="Tata logo">
    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/7/72/IISER%2C_PUNE_Logo.svg/1200px-IISER%2C_PUNE_Logo.svg.png" alt="IISER logo">
<img src="https://www.mypunepulse.com/wp-content/uploads/2024/10/DIWALI-HOLIDAY-7-1024x563.jpg" alt="PCSP logo">
  
</div>
</div>

  </div>

  <h1>National Cyber Security Awareness Month October 2025</h1>
  <div class="muted">Spot the phish, ignore the safe. Protect network integrity for 90 seconds.</div>

  <button id="start">Start Mission</button>

  <div id="hud">
    <div class="hud-card" id="score">Score: 0</div>
    <div class="hud-card" id="timer">Time: 90</div>
    <div class="hud-card" id="shown">Shown: 0</div>
    <div class="hud-card" id="correct">Correct: 0</div>
    <div class="hud-card">Network Integrity</div>
    <div id="healthBar"><div id="healthFill"></div></div>
  </div>

  <div id="inbox"></div>
  <div id="status"></div>
  <button id="restart">Restart Mission</button>
</div>

<script>
  // ------------------ FORM HANDLING ------------------
  const entryForm = document.getElementById('entryForm');
  entryForm.addEventListener('submit', (e)=>{
    const nameValue = document.getElementById('name').value.trim();
    if(nameValue === '') {
      e.preventDefault();
      alert('Please enter your name');
      return;
    }
    // Hide popup & show game immediately
    document.getElementById('popup').style.display='none';
    document.getElementById('gameArea').style.display='flex';
    const mutedText = document.querySelector('.muted');
    mutedText.textContent = `Hello ${nameValue}! Spot the phish, ignore the safe. Protect network integrity for 90 seconds.`;
  });

  // ------------------ GAME CODE ------------------
  const inbox = document.getElementById('inbox');
  const scoreBox = document.getElementById('score');
  const timerBox = document.getElementById('timer');
  const shownBox = document.getElementById('shown');
  const correctBox = document.getElementById('correct');
  const healthFill = document.getElementById('healthFill');
  const statusBox = document.getElementById('status');
  const restartBtn = document.getElementById('restart');
  const startBtn = document.getElementById('start');

  let score=0,timeLeft=90,health=100,timer,gameActive=false,spawnTimer;
  let notificationsShown=0,correctActions=0;

  const mails = [
    {text:'Bank Alert: Unusual login attempt detected. Verify account access.',type:'phish'},
    {text:'System: Software update installed successfully.',type:'safe'},
    {text:'UPI: Pending payment ‚Äî click to confirm transaction.',type:'phish'},
    {text:'Security Tip: Enable two-factor authentication for safer login.',type:'safe'},
    {text:'Tax Portal: Refund initiated ‚Äî submit PAN to claim.',type:'phish'},
    {text:'IT Notice: Scheduled maintenance tonight; services may be unavailable.',type:'safe'}
  ];

  function randomMail(){ return mails[Math.floor(Math.random()*mails.length)]; }

  function spawnMail(){
    if(!gameActive) return;
    notificationsShown++;
    shownBox.textContent = 'Shown: '+notificationsShown;
    const m=randomMail();
    const row=document.createElement('div'); row.className='mail';
    const text=document.createElement('div'); text.className='mail-text'; text.textContent=m.text;
    const actions=document.createElement('div'); actions.className='actions';
    const reportBtn=document.createElement('button'); reportBtn.textContent='üö® Report Phish'; reportBtn.className='btn report'; reportBtn.onclick=()=>checkMail(m,true,row);
    const safeBtn=document.createElement('button'); safeBtn.textContent='üïäÔ∏è Safe'; safeBtn.className='btn safe'; safeBtn.onclick=()=>checkMail(m,false,row);
    actions.append(reportBtn,safeBtn); text.appendChild(actions); row.appendChild(text); inbox.prepend(row);
  }

  function checkMail(m,reported,row){
    if(!gameActive) return;
    if(m.type==='phish'&&reported){ score+=2; correctActions++; statusBox.textContent='‚úÖ Phish neutralized!'; }
    else if(m.type==='safe'&&!reported){ score+=1; correctActions++; statusBox.textContent='üëç Safe message ignored.'; }
    else { score-=1; health-=15; statusBox.textContent='‚ùå Wrong action! Integrity damaged.'; }
    scoreBox.textContent='Score: '+score; correctBox.textContent='Correct: '+correctActions;
    healthFill.style.width=Math.max(0,health)+'%';
    if(health<=0) endGame(); row.remove();
  }

  function startGame(){
    score=0;timeLeft=90;health=100;notificationsShown=0;correctActions=0;gameActive=true;
    scoreBox.textContent='Score: 0'; timerBox.textContent='Time: 90'; shownBox.textContent='Shown: 0'; correctBox.textContent='Correct: 0';
    healthFill.style.width='100%'; statusBox.textContent=''; inbox.innerHTML=''; restartBtn.style.display='none'; startBtn.style.display='none';
    timer=setInterval(()=>{timeLeft--; timerBox.textContent='Time: '+timeLeft; if(timeLeft<=0) endGame();},1000);
    spawnTimer=setInterval(()=>{if(!gameActive)return clearInterval(spawnTimer); spawnMail();},3500);
  }

  function endGame(){
    gameActive=false; clearInterval(timer); clearInterval(spawnTimer);
    const accuracy = notificationsShown ? Math.round((correctActions/notificationsShown)*100) : 0;
    inbox.innerHTML='<h2>Mission Over!</h2>'+
      '<p>Final Score: '+score+'</p>'+
      '<p>Notifications Displayed: '+notificationsShown+'</p>'+
      '<p>Correct Actions: '+correctActions+' ('+accuracy+'% accuracy)</p>';
    statusBox.textContent='Mission complete!';
    restartBtn.style.display='block'; startBtn.style.display='block';
  }

  restartBtn.onclick=()=>startGame();
  startBtn.onclick=()=>startGame();
</script>

</body>
</html>
